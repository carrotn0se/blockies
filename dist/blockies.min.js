"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let randseeds={};function seedrand(a,b){randseeds[b]=[,,,,],randseeds[b].fill(0);for(let c=0;c<a.length;c++)randseeds[b][c%4]=(randseeds[b][c%4]<<5)-randseeds[b][c%4]+a.charCodeAt(c)}function rand(a){randseeds[a]||(a="fallback");const b=randseeds[a][0]^randseeds[a][0]<<11;return randseeds[a][0]=randseeds[a][1],randseeds[a][1]=randseeds[a][2],randseeds[a][2]=randseeds[a][3],randseeds[a][3]=randseeds[a][3]^randseeds[a][3]>>19^b^b>>8,(randseeds[a][3]>>>0)/2147483648}function createColor(a){const b=Math.floor(360*rand(a)),c=60*rand(a)+40+"%",d=25*(rand(a)+rand(a)+rand(a)+rand(a))+"%";return"hsl("+b+","+c+","+d+")"}function createCumulativeArray(a){let b=[a[0]];for(let c=1;c<a.length;c++)b[c]=b[c-1]+a[c];return b}function generateRandomArray(a,b){let c=[];for(let d,e=0;e<b;e++){d=rand("pattern")*a.at(-1);for(let b=0;b<a.length;b++)if(d<a[b]){c.push(b);break}}return c}function createImageData(a){const{size:b,bgcolorratio:c,colorratio:d,spotcolorratio:e}=a,f=createCumulativeArray([c,d,e]),g=b,h=Math.ceil(g/2),j=[];for(let c,d=0;d<b;d++){c=generateRandomArray(f,h);const a=c.slice(0,g-h);a.reverse(),c=c.concat(a);for(let a=0;a<c.length;a++)j.push(c[a])}return j}function buildOpts(a){const b={};return b.seed=a.seed||Math.floor(10000000000000000*Math.random()).toString(16),seedrand(b.seed,"fallback"),a.patternseed&&(b.patternseed=a.patternseed,seedrand(b.patternseed,"pattern")),a.colorseed&&(b.colorseed=a.colorseed,seedrand(b.colorseed,"color")),a.bgcolorseed&&(b.bgcolorseed=a.bgcolorseed,seedrand(b.bgcolorseed,"bgcolor")),a.spotcolorseed&&(b.spotcolorseed=a.spotcolorseed,seedrand(b.spotcolorseed,"spotcolor")),b.size=a.size||8,b.scale=a.scale||4,b.color=a.color||createColor("color"),b.bgcolor=a.bgcolor||createColor("bgcolor"),b.spotcolor=a.spotcolor||createColor("spotcolor"),b.colorratio=void 0!==a.colorratio&&null!==a.colorratio?a.colorratio:30,b.bgcolorratio=void 0!==a.bgcolorratio&&null!==a.bgcolorratio?a.bgcolorratio:60,b.spotcolorratio=void 0!==a.spotcolorratio&&null!==a.spotcolorratio?a.spotcolorratio:10,b}function renderIcon(a,b){randseeds={},a=buildOpts(a||{});const c=createImageData(a),d=Math.sqrt(c.length);b.width=b.height=a.size*a.scale;const e=b.getContext("2d");e.fillStyle=a.bgcolor,e.fillRect(0,0,b.width,b.height),e.fillStyle=a.color;for(let f=0;f<c.length;f++)if(c[f]){const b=Math.floor(f/d),g=f%d;e.fillStyle=1==c[f]?a.color:a.spotcolor,e.fillRect(g*a.scale,b*a.scale,a.scale,a.scale)}return b}function createIcon(a){var b=document.createElement("canvas");return renderIcon(a,b),b}exports.renderIcon=renderIcon,exports.createIcon=createIcon;